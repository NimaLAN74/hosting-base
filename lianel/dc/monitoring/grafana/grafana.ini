[server]
protocol = http
http_addr = 0.0.0.0
http_port = 3000
domain = monitoring.lianel.se
root_url = https://monitoring.lianel.se

[security]
admin_user = admin
admin_password = ${GRAFANA_ADMIN_PASSWORD}

[auth.generic_oauth]
enabled = true
name = Keycloak
allow_sign_up = true
client_id = grafana-client
client_secret = ${GRAFANA_OAUTH_CLIENT_SECRET}
scopes = openid email profile
auth_url = https://auth.lianel.se/realms/lianel/protocol/openid-connect/auth
token_url = https://auth.lianel.se/realms/lianel/protocol/openid-connect/token
api_url = https://auth.lianel.se/realms/lianel/protocol/openid-connect/userinfo
use_pkce = true
role_attribute_path = contains(realm_access.roles[*], 'admin') && 'Admin' || contains(realm_access.roles[*], 'editor') && 'Editor' || 'Viewer'
allow_assign_grafana_admin = true
auto_login = false

[users]
allow_sign_up = true
auto_assign_org_role = Viewer

[log]
mode = console
level = info

