# ============================================
# Environment Variables Configuration
# ============================================
# Copy this file to .env and update values for your environment
# This is the SINGLE SOURCE OF TRUTH for all environment variables
# Frontend React app uses REACT_APP_ prefix for environment variables

# ============================================
# Domain Configuration
# ============================================
DOMAIN_MAIN=www.lianel.se
DOMAIN_ALT=lianel.se
DOMAIN_AUTH=auth.lianel.se
DOMAIN_MONITORING=monitoring.lianel.se
DOMAIN_AIRFLOW=airflow.lianel.se

# Frontend environment variables (REACT_APP_ prefix required)
REACT_APP_DOMAIN_MAIN=${DOMAIN_MAIN}
REACT_APP_DOMAIN_ALT=${DOMAIN_ALT}
REACT_APP_DOMAIN_AUTH=${DOMAIN_AUTH}
REACT_APP_DOMAIN_MONITORING=${DOMAIN_MONITORING}
REACT_APP_DOMAIN_AIRFLOW=${DOMAIN_AIRFLOW}

# ============================================
# Keycloak Configuration
# ============================================
KEYCLOAK_URL=https://${DOMAIN_AUTH}
KEYCLOAK_REALM=lianel
KEYCLOAK_FRONTEND_CLIENT_ID=frontend-client
KEYCLOAK_GRAFANA_CLIENT_ID=grafana-client
KEYCLOAK_OAUTH2_PROXY_CLIENT_ID=oauth2-proxy
KEYCLOAK_BACKEND_CLIENT_ID=backend-client

# Keycloak Admin Credentials
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=your_keycloak_admin_password_here

# Keycloak Database Configuration
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=your_keycloak_db_password_here

# Frontend Keycloak: use www.lianel.se/auth (same-origin proxy) so login hits Keycloak via www's /auth/
REACT_APP_KEYCLOAK_URL=https://www.lianel.se/auth
REACT_APP_KEYCLOAK_REALM=${KEYCLOAK_REALM}
REACT_APP_KEYCLOAK_CLIENT_ID=${KEYCLOAK_FRONTEND_CLIENT_ID}

# Backend Client Secret (for profile-service and energy-service)
BACKEND_CLIENT_SECRET=your_backend_client_secret_here

# ============================================
# Service URLs
# ============================================
GRAFANA_URL=https://${DOMAIN_MONITORING}
AIRFLOW_URL=https://${DOMAIN_AIRFLOW}
FRONTEND_URL=https://${DOMAIN_MAIN}

# Frontend service URLs
REACT_APP_GRAFANA_URL=${GRAFANA_URL}
REACT_APP_AIRFLOW_URL=${AIRFLOW_URL}
REACT_APP_FRONTEND_URL=${FRONTEND_URL}

# ============================================
# Database Configuration
# ============================================
POSTGRES_HOST=172.18.0.1
POSTGRES_PORT=5432
POSTGRES_USER=airflow
POSTGRES_PASSWORD=your_postgres_password_here
POSTGRES_DB_AIRFLOW=airflow
POSTGRES_DB_ENERGY=lianel_energy
POSTGRES_DB_STOCK_MONITORING=lianel_stock_monitoring
POSTGRES_DB_KEYCLOAK=keycloak

# ============================================
# Service Ports (internal Docker network)
# ============================================
FRONTEND_PORT=80
GRAFANA_PORT=3000
KEYCLOAK_PORT=8080
OAUTH2_PROXY_PORT=4180
ENERGY_SERVICE_PORT=3001
PROFILE_SERVICE_PORT=3000

# ============================================
# Grafana Configuration
# ============================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_admin_password_here
GRAFANA_OAUTH_CLIENT_SECRET=your_grafana_oauth_client_secret_here

# ============================================
# OAuth2 Proxy Configuration
# ============================================
OAUTH2_PROXY_CLIENT_ID=${KEYCLOAK_OAUTH2_PROXY_CLIENT_ID}
OAUTH2_PROXY_CLIENT_SECRET=your_oauth2_proxy_client_secret_here
OAUTH2_PROXY_COOKIE_SECRET=your_oauth2_proxy_cookie_secret_here

# ============================================
# Airflow Configuration
# ============================================
AIRFLOW_UID=50000
AIRFLOW__CORE__FERNET_KEY=your_airflow_fernet_key_here
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW_OAUTH_CLIENT_SECRET=your_airflow_oauth_client_secret_here
_AIRFLOW_WWW_USER_USERNAME=admin
_AIRFLOW_WWW_USER_PASSWORD=your_airflow_www_user_password_here
_PIP_ADDITIONAL_REQUIREMENTS=

# ============================================
# Redis Configuration
# ============================================
REDIS_PASSWORD=your_redis_password_here
# Stock Monitoring real-time intraday chart: set REDIS_URL so each price change is stored and shown live.
# If Redis is in the Airflow stack, connect it to lianel-network and use container name: redis://:${REDIS_PASSWORD}@dc-redis-1:6379/1 (DB 1; Celery uses 0).
REDIS_URL=

# ============================================
# Comp-AI / Ollama (local model)
# ============================================
# Set these to use the Ollama container (pipeline starts it with profile local-model).
# Compose defaults: http://ollama:11434 and tinyllama if unset. Override here if needed.
# COMP_AI_OLLAMA_URL=http://ollama:11434
# COMP_AI_OLLAMA_MODEL=tinyllama
# One-time on server after deploy: docker exec lianel-ollama ollama pull tinyllama
# Rate limit: max requests per window (0 = disabled). Default 60 per 60 sec per client IP.
# COMP_AI_RATE_LIMIT_REQUESTS=60
# COMP_AI_RATE_LIMIT_WINDOW_SECS=60
# Max prompt length (chars). 0 = no limit.
# COMP_AI_MAX_PROMPT_LEN=32768

# ============================================
# API Tokens
# ============================================
ENTSOE_API_TOKEN=your_entsoe_api_token_here

# ============================================
# Redirect URIs (for Keycloak client configuration)
# ============================================
# These are used in scripts to configure Keycloak clients
KEYCLOAK_REDIRECT_URI_MAIN=https://${DOMAIN_MAIN}/*
KEYCLOAK_REDIRECT_URI_ALT=https://${DOMAIN_ALT}/*
KEYCLOAK_REDIRECT_URI_MONITORING=https://${DOMAIN_MAIN}/monitoring
KEYCLOAK_REDIRECT_URI_MONITORING_WILDCARD=https://${DOMAIN_MAIN}/monitoring/*
KEYCLOAK_REDIRECT_URI_MONITORING_ALT=https://${DOMAIN_ALT}/monitoring
KEYCLOAK_REDIRECT_URI_MONITORING_ALT_WILDCARD=https://${DOMAIN_ALT}/monitoring/*

# ============================================
# OAuth2 Proxy Client ID (for frontend logout)
# ============================================
REACT_APP_OAUTH2_PROXY_CLIENT_ID=${KEYCLOAK_OAUTH2_PROXY_CLIENT_ID}
